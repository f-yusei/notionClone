{"ast":null,"code":"var _jsxFileName = \"/Users/yusei/Desktop/dev/reactProject/notion-clone/client/src/pages/Memo.jsx\",\n  _s = $RefreshSig$();\nimport { Box, IconButton, TextField, alpha } from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport StarBorderOutlinedIcon from \"@mui/icons-material/StarBorderOutlined\";\nimport DeleteOutlinedIcon from \"@mui/icons-material/DeleteOutlined\";\nimport { useNavigate, useParams } from 'react-router-dom';\nimport memoApi from '../api/memoApi';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setMemo } from '../redux/features/memoSlice';\nimport EmojiPicker from '../components/common/EmojiPicker';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Memo() {\n  _s();\n  const {\n    memoId\n  } = useParams();\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [icon, setIcon] = useState(\"\");\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const memos = useSelector(state => state.memo.value);\n  useEffect(() => {\n    const getMemo = async () => {\n      try {\n        const res = await memoApi.getOne(memoId);\n        setTitle(res.title);\n        setIcon(res.icon);\n        setDescription(res.description);\n      } catch (err) {\n        alert(err);\n      }\n    };\n    getMemo();\n  }, [memoId]);\n  let timer;\n  const timeout = 500;\n  const updateTitle = async e => {\n    clearTimeout(timer);\n    const newTitle = e.target.value;\n    setTitle(newTitle);\n    timer = setTimeout(async () => {\n      try {\n        await memoApi.update(memoId, {\n          title: newTitle\n        });\n      } catch (err) {\n        alert(err);\n      }\n    }, timeout);\n  };\n  const updateDescription = async e => {\n    console.log(\"ok\");\n    clearTimeout(timer);\n    const newDescription = e.target.value;\n    setDescription(newDescription);\n    timer = setTimeout(async () => {\n      try {\n        await memoApi.update(memoId, {\n          description: newDescription\n        });\n      } catch (err) {\n        alert(err);\n      }\n    }, timeout);\n  };\n  const deleteMemo = async () => {\n    try {\n      const deletedMemo = await memoApi.delete(memoId);\n      const mewMemos = memos.filter(e => e._id !== deletedMemo._id);\n      if (mewMemos.length === 0) {\n        navigate(\"/memo\");\n      } else {\n        navigate(`/memo/${mewMemos[0]._id}`);\n      }\n      dispatch(setMemo(mewMemos));\n    } catch (err) {\n      alert(err);\n    }\n  };\n  const onIconChange = async newIcon => {\n    let temp = [...memos];\n    const index = temp.findIndex(e => e._id === memoId);\n    temp[index] = {\n      ...temp[index],\n      icon: newIcon\n    };\n    setIcon(newIcon);\n    dispatch(setMemo(temp));\n    try {\n      await memoApi.update(memoId, {\n        icon: newIcon\n      });\n    } catch (err) {}\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(StarBorderOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        variant: \"outlined\",\n        color: \"error\",\n        onClick: deleteMemo,\n        children: /*#__PURE__*/_jsxDEV(DeleteOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        padding: \"10px 50px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(EmojiPicker, {\n          icon: icon,\n          onChange: onIconChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          onChange: updateTitle,\n          value: title,\n          placeholder: \"\\u7121\\u984C\",\n          variant: \"outlined\",\n          fullWidth: true,\n          sx: {\n            \".MuiOutlinedInput-input\": {\n              padding: 0\n            },\n            \".MuiOutlinedInput-notchedOutline\": {\n              border: \"none\"\n            },\n            \".MuiOutlinedInput-input\": {\n              fontSize: \"2.0rem\",\n              fontWeight: \"700\"\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          onChange: updateDescription,\n          value: description,\n          placeholder: \"\\u8FFD\\u52A0\",\n          variant: \"outlined\",\n          fullWidth: true,\n          multiline: true,\n          sx: {\n            \".MuiOutlinedInput-input\": {\n              padding: 0\n            },\n            \".MuiOutlinedInput-notchedOutline\": {\n              border: \"none\"\n            },\n            \".MuiOutlinedInput-input\": {\n              fontSize: \"1.0rem\"\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(Memo, \"gGWgrxEEyT8TZbIl/WFzKX7DrJQ=\", false, function () {\n  return [useParams, useNavigate, useDispatch, useSelector];\n});\n_c = Memo;\nexport default Memo;\nvar _c;\n$RefreshReg$(_c, \"Memo\");","map":{"version":3,"names":["Box","IconButton","TextField","alpha","React","useEffect","useState","StarBorderOutlinedIcon","DeleteOutlinedIcon","useNavigate","useParams","memoApi","useDispatch","useSelector","setMemo","EmojiPicker","jsxDEV","_jsxDEV","Fragment","_Fragment","Memo","_s","memoId","title","setTitle","description","setDescription","icon","setIcon","navigate","dispatch","memos","state","memo","value","getMemo","res","getOne","err","alert","timer","timeout","updateTitle","e","clearTimeout","newTitle","target","setTimeout","update","updateDescription","console","log","newDescription","deleteMemo","deletedMemo","delete","mewMemos","filter","_id","length","onIconChange","newIcon","temp","index","findIndex","children","sx","display","alignItems","width","fileName","_jsxFileName","lineNumber","columnNumber","variant","color","onClick","padding","onChange","placeholder","fullWidth","border","fontSize","fontWeight","multiline","_c","$RefreshReg$"],"sources":["/Users/yusei/Desktop/dev/reactProject/notion-clone/client/src/pages/Memo.jsx"],"sourcesContent":["import { Box, IconButton, TextField, alpha } from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport StarBorderOutlinedIcon from \"@mui/icons-material/StarBorderOutlined\"\nimport DeleteOutlinedIcon from \"@mui/icons-material/DeleteOutlined\"\nimport { useNavigate, useParams } from 'react-router-dom';\nimport memoApi from '../api/memoApi';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setMemo } from '../redux/features/memoSlice';\nimport EmojiPicker from '../components/common/EmojiPicker';\n\nfunction Memo() {\n\n    const { memoId } = useParams();\n    const [title, setTitle] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [icon, setIcon] = useState(\"\");\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n    const memos = useSelector((state) => state.memo.value);\n\n    useEffect(() => {\n        const getMemo = async () => {\n            try {\n                const res = await memoApi.getOne(memoId);\n                setTitle(res.title);\n                setIcon(res.icon);\n                setDescription(res.description)\n            } catch (err) {\n                alert(err);\n            }\n        }\n        getMemo();\n    }, [memoId])\n\n    let timer;\n    const timeout = 500;\n\n    const updateTitle = async (e) => {\n        clearTimeout(timer);\n        const newTitle = e.target.value;\n        setTitle(newTitle);\n\n        timer = setTimeout(async () => {\n            try {\n                await memoApi.update(memoId, { title: newTitle })\n            } catch (err) {\n                alert(err);\n            }\n        }, timeout)\n    }\n\n    const updateDescription = async (e) => {\n        console.log(\"ok\")\n        clearTimeout(timer);\n        const newDescription = e.target.value;\n        setDescription(newDescription);\n\n        timer = setTimeout(async () => {\n            try {\n                await memoApi.update(memoId, { description: newDescription })\n            } catch (err) {\n                alert(err);\n            }\n        }, timeout)\n    }\n\n    const deleteMemo = async () => {\n        try {\n            const deletedMemo = await memoApi.delete(memoId);\n            const mewMemos = memos.filter((e) => e._id !== deletedMemo._id);\n            if (mewMemos.length === 0) {\n                navigate(\"/memo\");\n            } else {\n                navigate(`/memo/${mewMemos[0]._id}`)\n            }\n            dispatch(setMemo(mewMemos));\n        } catch (err) {\n            alert(err);\n        }\n    }\n\n    const onIconChange = async (newIcon) => {\n        let temp = [...memos];\n        const index = temp.findIndex((e) => e._id === memoId);\n        temp[index] = { ...temp[index], icon: newIcon };\n        setIcon(newIcon);\n        dispatch(setMemo(temp))\n        try {\n            await memoApi.update(memoId, { icon: newIcon })\n        } catch (err) {\n\n        }\n    }\n\n    return (\n        <>\n            <Box sx={{\n                display: \"flex\",\n                alignItems: \"center\",\n                width: \"100%\",\n            }}>\n                <IconButton>\n                    <StarBorderOutlinedIcon />\n                </IconButton>\n                <IconButton variant=\"outlined\" color='error' onClick={deleteMemo}>\n                    <DeleteOutlinedIcon />\n                </IconButton>\n            </Box>\n            <Box sx={{ padding: \"10px 50px\" }}>\n                <Box>\n                    <EmojiPicker icon={icon} onChange={onIconChange} />\n                    <TextField\n                        onChange={updateTitle}\n                        value={title}\n                        placeholder='無題' variant='outlined' fullWidth\n                        sx={{\n                            \".MuiOutlinedInput-input\": { padding: 0 },\n                            \".MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n                            \".MuiOutlinedInput-input\": { fontSize: \"2.0rem\", fontWeight: \"700\" }\n                        }}\n                    />\n                    <TextField\n                        onChange={updateDescription}\n                        value={description}\n                        placeholder='追加'\n                        variant='outlined'\n                        fullWidth\n                        multiline\n                        sx={{\n                            \".MuiOutlinedInput-input\": { padding: 0 },\n                            \".MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n                            \".MuiOutlinedInput-input\": { fontSize: \"1.0rem\", }\n                        }}\n                    />\n                </Box>\n            </Box>\n        </>\n    )\n}\n\nexport default Memo"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}